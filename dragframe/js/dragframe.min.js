$(function(){!function(i,r){"use strict";var t={objlist:[],resetSize:function(){for(i in this.objlist)this.objlist[i].initFrameSize()}},e=function(r){this.conf={type:1,mainFrame:"#td-frame",frameL:".td-line",frame1:".td-left",frame1Size:0,frame2:".td-right",frame2Size:0,callback:null};for(i in r)this.conf[i]=r[i];this.drF=null,this.drF1=null,this.drF2=null,this.drL=null,this.mIng=!1,this.mDown=!1,this.zuoBiao=[0,0],this.drF1BL=0,this.init(r.mainFrame)};e.prototype={path:function(){var i=document.scripts,r=i[i.length-1],t=r.src;return t.substring(0,t.lastIndexOf("/")+1)}(),init:function(i){var r=this,t=r.drF=$(i);return r.drF1=t.children(r.conf.frame1),r.drF2=t.children(r.conf.frame2),r.drL=t.children(r.conf.frameL),r.drF.addClass("drag-m-frame"),r.drF1.addClass("drag-f1"),r.drF2.addClass("drag-f2"),r.drL.addClass("drag-line"),1==r.conf.type?r.drF.addClass("drag-lr-frame"):r.drF.addClass("drag-ud-frame"),r.drF1BL=.5,r.initFrameSize(),r.bindMove(),r},initFrameSize:function(){var i=this;if(1==i.conf.type){var r=i.drL.outerWidth(),t=i.drF.width()-r,e=i.drF1.width()+i.drF2.width();if(r+e==t)return;var d=parseInt(t*i.drF1BL);i.drL.css("left",d+"px"),i.drF1.width(d),i.drF2.width(t-d)}else{var n=i.drL.outerHeight(),a=i.drF.height()-n,o=i.drF1.height()+i.drF2.height();if(n+o==a)return;var s=parseInt(a*i.drF1BL);i.drL.css("top",s+"px"),i.drF1.height(s),i.drF2.height(a-s)}},bindMove:function(){var i=this;i.drL.mousedown(function(r){i.mDown=!0,i.zuoBiao[0]=r.clientX,i.zuoBiao[1]=r.clientY,i.addShade()}),$(document).mouseup(function(r){i.mDown=!1,i.mIng=!1,$("#drag_frame_bg").remove()})},addShade:function(){var i=this,r=i.conf;$("body").append('<div id="drag_frame_bg" class="drag_frame_bg"></div>');var t=$("#drag_frame_bg");t.css({height:$(document).height()+"px",width:$(document).width()+"px"});var e=i.drF1,d=i.drL,n=i.drF2;t.mousemove(function(t){if(1==r.type){var a=t.clientX-i.zuoBiao[0];if(i.zuoBiao[0]=t.clientX,i.mDown&&!i.mIng){"function"==typeof r.callback&&r.callback(t),i.mIng=!0;var o=a+e.width(),s=n.width()-a;if(0>=o||0>=s)return;a+e.width();e.width(o),n.width(s),i.drF1BL=o/(o+s),d.css("left",o+"px"),i.mIng=!1}}else{var h=t.clientY-i.zuoBiao[1];if(i.zuoBiao[1]=t.clientY,i.mDown&&!i.mIng){"function"==typeof r.callback&&r.callback(t),i.mIng=!0;var f=e.height()+h,c=n.height()-h;if(0>=f||0>=c)return;e.height(f),n.height(c),i.drF1BL=f/(f+c),d.css("top",f+"px"),i.mIng=!1}}})}},i.dragFrame={resetSize:function(){t.resetSize()},init:function(i){var r=new e(i);return t.objlist.push(r),r}}}(window)});