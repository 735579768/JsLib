$(function(){!function(i,t){"use strict";var r={objlist:[],resetSize:function(){for(i in this.objlist)this.objlist[i].resetSize()}},e=function(t){this.conf={type:1,mainFrame:"#td-frame",frameL:".td-line",frame1:".td-left",frame1Size:0,frame2:".td-right",frame2Size:0,callback:null};for(i in t)this.conf[i]=t[i];this.drF=null,this.drF1=null,this.drF2=null,this.drL=null,this.mIng=!1,this.mDown=!1,this.zuoBiao=[0,0],this.init(t.mainFrame)};e.prototype={path:function(){var i=document.scripts,t=i[i.length-1],r=t.src;return r.substring(0,r.lastIndexOf("/")+1)}(),init:function(i){var t=this,r=t.drF=$(i);return t.drF1=r.children(t.conf.frame1),t.drF2=r.children(t.conf.frame2),t.drL=r.children(t.conf.frameL),t.drF.addClass("drag-m-frame"),t.drF1.addClass("drag-f1"),t.drF2.addClass("drag-f2"),t.drL.addClass("drag-line"),t.initFrameSize(),t.bindMove(),t},resetSize:function(){var i=this;if(1==i.conf.type){var t=parseFloat(i.drL.css("left")),r=i.drF.width();i.drF1.width(t),i.drF2.width(r-t-i.drL.outerWidth())}else{var e=parseFloat(i.drL.css("top")),d=i.drF.height();i.drF1.height(e),i.drF2.height(d-e-i.drL.outerHeight())}},initFrameSize:function(){var i=this;if(1==i.conf.type){i.drF.addClass("drag-lr-frame");var t=i.drF.width();i.drF1.width(t/2),i.drF2.width(t/2-i.drL.outerWidth()),i.drL.css({left:t/2+"px"})}else{i.drF.addClass("drag-ud-frame");var r=i.drF.height();i.drF1.height(r/2),i.drF2.height(r/2-i.drL.outerHeight()),i.drL.css({top:r/2+"px"})}},bindMove:function(){var i=this;i.drL.mousedown(function(t){i.mDown=!0,i.zuoBiao[0]=t.clientX,i.zuoBiao[1]=t.clientY,i.addShade()}),$(document).mouseup(function(t){i.mDown=!1,i.mIng=!1,$("#drag_frame_bg").remove()})},addShade:function(){var i=this,t=i.conf;$("body").append('<div id="drag_frame_bg" class="drag_frame_bg"></div>');var r=$("#drag_frame_bg");r.css({height:$(document).height()+"px",width:$(document).width()+"px"});var e=i.drF1,d=i.drL,n=i.drF2;r.mousemove(function(r){if("function"==typeof t.callback&&t.callback(r),1==t.type){var a=r.clientX-i.zuoBiao[0];if(i.zuoBiao[0]=r.clientX,i.mDown&&!i.mIng){i.mIng=!0;var o=a+e.width(),s=n.width()-a;if(0>=o||0>=s)return;a+e.width();e.width(o),n.width(s),d.css("left",o+"px"),i.mIng=!1}}else{var h=r.clientY-i.zuoBiao[1];if(i.zuoBiao[1]=r.clientY,i.mDown&&!i.mIng){i.mIng=!0;var f=e.height()+h,c=n.height()-h;if(0>=f||0>=c)return;e.height(f),n.height(c),d.css("top",f+"px"),i.mIng=!1}}})}},i.dragFrame={resetSize:function(){r.resetSize()},init:function(i){var t=new e(i);return r.objlist.push(t),t}}}(window)});