$(function(){!function(t,i){"use strict";var r={objlist:[],resetSize:function(){for(t in this.objlist)this.objlist[t].resetSize()}},e=function(i){this.conf={type:1,mainFrame:"#td-frame",frameL:".td-line",frame1:".td-left",frame2:".td-right",callback:null};for(t in i)this.conf[t]=i[t];this.drF=null,this.drF1=null,this.drF2=null,this.drL=null,this.mIng=!1,this.mDown=!1,this.zuoBiao=[0,0],this.init(i.mainFrame)};e.prototype={path:function(){var t=document.scripts,i=t[t.length-1],r=i.src;return r.substring(0,r.lastIndexOf("/")+1)}(),init:function(t){var i=this,r=i.drF=$(t);return i.drF1=r.children(i.conf.frame1),i.drF2=r.children(i.conf.frame2),i.drL=r.children(i.conf.frameL),i.drF.addClass("drag-m-frame"),i.drF1.addClass("drag-f1"),i.drF2.addClass("drag-f2"),i.drL.addClass("drag-line"),i.initFrameSize(),i.bindMove(),i},resetSize:function(){var t=this;if(1==t.conf.type){var i=parseFloat(t.drL.css("left")),r=t.drF.width();t.drF1.width(i),t.drF2.width(r-i-t.drL.outerWidth())}else{var e=parseFloat(t.drL.css("top")),d=t.drF.height();t.drF1.height(e),t.drF2.height(d-e-t.drL.outerHeight())}},initFrameSize:function(){var t=this;if(1==t.conf.type){t.drF.addClass("drag-lr-frame");var i=t.drF.width();t.drF1.width(i/2),t.drF2.width(i/2-t.drL.outerWidth()),t.drL.css({left:i/2+"px"})}else{t.drF.addClass("drag-ud-frame");var r=t.drF.height();t.drF1.height(r/2),t.drF2.height(r/2-t.drL.outerHeight()),t.drL.css({top:r/2+"px"})}},bindMove:function(){var t=this;t.drL.mousedown(function(i){t.mDown=!0,t.zuoBiao[0]=i.clientX,t.zuoBiao[1]=i.clientY,t.addShade()}),$(document).mouseup(function(i){t.mDown=!1,t.mIng=!1,$("#drag_frame_bg").remove()})},addShade:function(){var t=this,i=t.conf;$("body").append('<div id="drag_frame_bg" class="drag_frame_bg"></div>');var r=$("#drag_frame_bg");r.css({height:$(document).height()+"px",width:$(document).width()+"px"});var e=t.drF1,d=t.drL,n=t.drF2;r.mousemove(function(r){if("function"==typeof i.callback&&i.callback(r),1==i.type){var a=r.clientX-t.zuoBiao[0];if(t.zuoBiao[0]=r.clientX,t.mDown&&!t.mIng){t.mIng=!0;var o=a+e.width(),s=n.width()-a;if(0>=o||0>=s)return;a+e.width();e.width(o),n.width(s),d.css("left",o+"px"),t.mIng=!1}}else{var h=r.clientY-t.zuoBiao[1];if(t.zuoBiao[1]=r.clientY,t.mDown&&!t.mIng){t.mIng=!0;var f=e.height()+h,c=n.height()-h;if(0>=f||0>=c)return;e.height(f),n.height(c),d.css("top",f+"px"),t.mIng=!1}}})}},t.dragFrame={resetSize:function(){r.resetSize()},init:function(t){var i=new e(t);return r.objlist.push(i),i}}}(window)});