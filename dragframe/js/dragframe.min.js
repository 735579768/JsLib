$(function(){!function(t,r){"use strict";var i={objlist:[],resetSize:function(){for(t in this.objlist)this.objlist[t].resetSize()}},e=function(r){this.conf={type:1,mainFrame:"#td-frame",frameL:".td-line",frame1:".td-left",frame1Size:0,frame2:".td-right",frame2Size:0,callback:null};for(t in r)this.conf[t]=r[t];this.drF=null,this.drF1=null,this.drF2=null,this.drL=null,this.mIng=!1,this.mDown=!1,this.zuoBiao=[0,0],this.init(r.mainFrame)};e.prototype={path:function(){var t=document.scripts,r=t[t.length-1],i=r.src;return i.substring(0,i.lastIndexOf("/")+1)}(),init:function(t){var r=this,i=r.drF=$(t);return r.drF1=i.children(r.conf.frame1),r.drF2=i.children(r.conf.frame2),r.drL=i.children(r.conf.frameL),r.drF.addClass("drag-m-frame"),r.drF1.addClass("drag-f1"),r.drF2.addClass("drag-f2"),r.drL.addClass("drag-line"),r.initFrameSize(),r.bindMove(),r},resetSize:function(){var t=this;if(1==t.conf.type){var r=t.drF.width(),i=t.drL.outerWidth(),e=t.drF1.width()+t.drF2.width();if(i+e==r)return;var d=t.drF1.width()/e+"",n=parseFloat(d.substring(0,d.lastIndexOf(".")+2)),a=parseInt(r*n);t.drL.css("left",a+"px"),t.drF1.width(a),t.drF2.width(r-a-i),console.log([n,r,a,r-a-i])}else{var s=t.drF.height(),o=t.drL.outerHeight(),h=t.drF1.height()+t.drF2.height();if(o+h==s)return;var d=t.drF1.height()/e+"",n=parseFloat(d.substring(0,d.lastIndexOf(".")+2)),f=parseInt(s*n);t.drL.css("left",f+"px"),t.drF1.height(f),t.drF2.height(s-f-o)}},initFrameSize:function(){var t=this;if(1==t.conf.type){t.drF.addClass("drag-lr-frame");var r=t.drF.width();t.drF1.width(r/2),t.drF2.width(r/2-t.drL.outerWidth()),t.drL.css({left:r/2+"px"}),t.drF1.css({left:"0px",top:"0px"}),t.drF2.css({right:"0px",top:"0px"})}else{t.drF.addClass("drag-ud-frame");var i=t.drF.height();t.drF1.height(i/2),t.drF2.height(i/2-t.drL.outerHeight()),t.drL.css({top:i/2+"px"}),t.drF1.css({left:"0px",top:"0px"}),t.drF2.css({left:"0px",bottom:"0px"})}},bindMove:function(){var t=this;t.drL.mousedown(function(r){t.mDown=!0,t.zuoBiao[0]=r.clientX,t.zuoBiao[1]=r.clientY,t.addShade()}),$(document).mouseup(function(r){t.mDown=!1,t.mIng=!1,$("#drag_frame_bg").remove()})},addShade:function(){var t=this,r=t.conf;$("body").append('<div id="drag_frame_bg" class="drag_frame_bg"></div>');var i=$("#drag_frame_bg");i.css({height:$(document).height()+"px",width:$(document).width()+"px"});var e=t.drF1,d=t.drL,n=t.drF2;i.mousemove(function(i){if(1==r.type){var a=i.clientX-t.zuoBiao[0];if(t.zuoBiao[0]=i.clientX,t.mDown&&!t.mIng){"function"==typeof r.callback&&r.callback(i),t.mIng=!0;var s=a+e.width(),o=n.width()-a;if(0>=s||0>=o)return;a+e.width();e.width(s),n.width(o),d.css("left",s+"px"),t.mIng=!1}}else{var h=i.clientY-t.zuoBiao[1];if(t.zuoBiao[1]=i.clientY,t.mDown&&!t.mIng){"function"==typeof r.callback&&r.callback(i),t.mIng=!0;var f=e.height()+h,c=n.height()-h;if(0>=f||0>=c)return;e.height(f),n.height(c),d.css("top",f+"px"),t.mIng=!1}}})}},t.dragFrame={resetSize:function(){i.resetSize()},init:function(t){var r=new e(t);return i.objlist.push(r),r}}}(window)});